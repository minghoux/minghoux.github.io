<!DOCTYPE html>
<html lang="en" ng-app="MyApp">
<head>
	<meta charset="UTF-8">
	<title>Client List</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	<script src=""></script>
	<style>
	.nav-group {
		padding: 10px;
		border-bottom: #ccc 1px solid;
	}
	.client-list {
		list-style: none;
		padding-left: 0;
	}
	.client-list li {
		border-bottom: #efefef 1px solid;
	}
	.form-control.searchBox {
		display: inline-block;
		width: 30% !important;
	}
	.filter-dropdown {
		position: relative;
	}
	.filter-list {
		position: absolute;
		left: 0;
		top: 33px;
		padding: 0;
		list-style: none;
		background-color: white;
		border: #ccc 1px solid;
	}
	.filter-list li {
		padding: 5px 10px;
	}
	.filter-list li:hover {
		background-color: #efefef;
		cursor: pointer;
	}
	.filter-label { margin-right: 5px;}
	/* listing of clients */
	.table {
		width: 100%;
		display: table;
		margin-bottom: 0;
	}
	.table-cell {
		display: table-cell;
		padding: 5px;
	}
	.client-list-row.active, .client-list-row.active:hover {
		background-color: #EEF3FF;
	}
	.client-list-row:hover {
		background-color: #efefef;
		cursor: pointer;
	}
	.name { width: 25%; }
	.email { width: 35%; }


	</style>
</head>
<body>


<section ng-controller="clientController" class="container">
	<h1>Client List</h1>

	<!-- client count -->
	<div class="nav-group">
		2642 Clients | <a href="" ng-click="filterTag=!filterTag">Filter Client</a> 
		<span ng-hide="currentFilter.length == 0">
			| <a href="" ng-click="clearFilter()">Clear Filter</a> | 
			{{currentFilter.length}} active filter
		</span>
	</div>

	<!-- filter by tag -->
	<div class="nav-group" ng-init="filter = ''">
		<span ng-repeat="item in currentFilter" class="btn btn-primary filter-label">
			{{item.tag}}
		</span>
		<span class="filter-dropdown">
			<a href="" class="btn btn-default" ng-click="filterActive=!filterActive">Add Filter</a>
			<ul class="filter-list" ng-if="filterActive">
				<li ng-click="addFilter(client.City)" ng-repeat="client in clients | limitTo: 8">
					{{client.City}}
				</li>
			</ul>
		</span>
	</div>
	

	<!-- select and paging -->
	<div class="nav-group">
		<input type="text" class="form-control searchBox" ng-init="clientSearch = '' " ng-model="clientSearch" placeholder="Client Search">
		<a href="" class="btn btn-default">select visible</a>
	</div>

	<!-- client list -->
	<ul class="client-list">
		<li ng-repeat="client in clients | limitTo: 20 | filter: clientSearch "
		ng-click="clientActive=!clientActive" 
		ng-class="{ 'active' : clientActive }" 
		class="client-list-row">
			<div class="table">
				<div class="table-cell name">
					{{client.Name}}
				</div>
				<div class="table-cell email">
					{{client.Email}}
				</div>
				<div class="table-cell city">
					<a href="" ng-click="addFilter(client.City)">{{client.City}}</a>
				</div>
			</div>
		</li>
	</ul>

</section>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script>
var app = angular.module("MyApp", []);

app.controller("clientController", function($scope, $http) {

  // get json data
  $http.get('client.json').success(function(data) {
    $scope.clients = data;
  });

  // default filter
  $scope.currentFilter = [
  	// { tag: 'Hong Kong' },
  	// { tag: 'London' },
  	// { tag: 'Singapore' }
  ];

  // add filter
  $scope.addFilter = function(city) {
  	$scope.currentFilter.push({ tag: city });
  	$scope.filterActive = false;
  }

  // clear filter
  $scope.clearFilter = function() {
  	$scope.currentFilter = '';
  }

});
</script>
</body>
</html>